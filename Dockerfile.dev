FROM python:3

# This will be set by the GitHub action to the folder containing this component.
ARG FOLDER=/app

COPY --chown=1000:1000 . /app
WORKDIR ${FOLDER}

USER 1000:1000

# Setup venv
ENV VIRTUAL_ENV_FOLDER $FOLDER
RUN python -m venv "$VIRTUAL_ENV_FOLDER/.venv"
ENV PATH="$VIRTUAL_ENV_FOLDER/.venv/bin:$PATH"

EXPOSE 3000
ENV PORT=3000
ENV HOST="0.0.0.0"

CMD ["python", "src/main.py"]
