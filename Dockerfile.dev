FROM python:3.12-slim

# This will be set by the GitHub action to the folder containing this component.
ARG FOLDER=/app
ENV FOLDER=${FOLDER}

COPY --chown=1000:1000 . /app
WORKDIR ${FOLDER}

USER 1000:1000

# Setup venv
ENV PATH="$FOLDER/.venv/bin:$PATH"

EXPOSE 8000
ENV PORT=8000
ENV HOST="0.0.0.0"

CMD $FOLDER/.venv/bin/python src/main.py
